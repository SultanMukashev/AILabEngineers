# Технологии, использованные в проекте

В данном проекте интегрированы несколько современных инструментов и технологий, что позволяет создать полностью автоматизированную, контейнеризированную среду для разработки и тестирования.


## Docker
- **Docker:** Платформа для создания, развёртывания и управления контейнерами. Позволяет упаковать приложение и его зависимости в единый изолированный контейнер.
- **Docker Hub:** Официальный репозиторий образов, откуда загружаются образы для PostgreSQL, MinIO и pgAdmin.

## Docker Compose
- **Docker Compose:** Инструмент для описания и управления мультиконтейнерными приложениями. Все сервисы проекта (PostgreSQL, MinIO, pgAdmin) описаны в файле `docker-compose.yml`, что обеспечивает их одновременный запуск и конфигурацию.

## PostgreSQL
- **PostgreSQL:** Надёжная реляционная база данных с открытым исходным кодом.
  
**Технические детали конфигурации:**
- **Образ:** Используется официальный образ `postgres:13` из Docker Hub
  
- **Переменные окружения:** 
В файле .env определены:
  - `POSTGRES_USER` — имя пользователя для подключения к базе данных.
  - `POSTGRES_PASSWORD` — пароль для пользователя.
   - `POSTGRES_DB` — имя базы данных, создаваемой при первом запуске.
  
- **Volumes:**
    - `./pgdata:/var/lib/postgresql/data` — обеспечивает постоянное хранение данных между перезапусками контейнера.
    - `./init.sql:/docker-entrypoint-initdb.d/init.sql` — инициализационный скрипт, автоматически выполняемый при первом запуске.
Порты:
Проброс порта "5432:5432" позволяет получать доступ к базе данных извне контейнера.


## MinIO
- **MinIO:** Высокопроизводительное S3-хранилище, совместимое с Amazon S3 API.

**Технические детали конфигурации:**
 - **Образ:** Используется официальный образ minio/minio из Docker Hub.
 - **Переменные окружения:** Определены в файле .env
    - `MINIO_ROOT_USER` — задаёт access key.
    - `MINIO_ROOT_PASSWORD` - задает secret key.
- **Команда запуска:** Команда `server /data --console-address ":9001" `запускает MinIO в режиме сервера с веб-консолью на порту 9001.

- **Volumes:** 
  - `./s3data:/data` — монтирование локальной директории для постоянного хранения файлов.

## pgAdmin
- **pgAdmin:** Веб-интерфейс для управления PostgreSQL.
- 
**Технические детали конфигурации:**
-  **Образ:** Используется официальный образ `dpage/pgadmin4` из Docker Hub.
- **Переменные окружения:** Определены в файле .env:
    - `PGADMIN_DEFAULT_EMAIL` - email для входа в систему.
    - `PGADMIN_DEFAULT_PASSWORD` - пароль для входа.
  
## Python
Проект включает два скрипта на Python для автоматизации загрузки данных:

### Скрипт для загрузки CSV в PostgreSQL (`load_postgres.py`)
- **Библиотеки:**  
  - `os` — для работы с переменными окружения и файловой системой.
  - `csv` — для чтения CSV-файлов.
  - `psycopg2` — для подключения к базе данных PostgreSQL и выполнения SQL-запросов.
- **Описание:**  
  Скрипт считывает CSV-файлы с данными пользователей и заказов, затем вставляет данные в соответствующие таблицы базы данных. Параметры подключения (хост, имя базы, пользователь, пароль, порт) берутся из переменных окружения (с возможностью переопределения через файл `.env`).

### Скрипт для загрузки файлов в MinIO (`upload_s3.py`)
- **Библиотеки:**  
  - `os` — для обхода файлов в директории.
  - `boto3` — клиент AWS SDK для Python, используемый для взаимодействия с MinIO через S3 API.
- **Описание:**  
  Скрипт загружает все файлы из заданной директории в указанный S3-бакет. Параметры для подключения (endpoint, access key, secret key) заданы напрямую в скрипте, но их можно вынести в переменные окружения для повышения безопасности и гибкости.

## Environment Variables (.env)
- **.env:** Файл, в котором хранятся все чувствительные параметры и настройки (логины, пароли, имена баз данных, ключи доступа). Это обеспечивает безопасность и гибкость в настройке контейнеров без необходимости изменять код или конфигурационные файлы.